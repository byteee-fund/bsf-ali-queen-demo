"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var E=Object.create;var T=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var Q=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var J=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports);var j=(l,n,m,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let d of z(n))!G.call(l,d)&&d!==m&&T(l,d,{get:()=>n[d],enumerable:!(s=O(n,d))||s.enumerable});return l};var R=(l,n,m)=>(m=l!=null?E(Q(l)):{},j(n||!l||!l.__esModule?T(m,"default",{value:l,enumerable:!0}):m,l));var y=J((Z,S)=>{S.exports=Vue});var x=R(y()),Y="onShow",U="onHide";function c(l,n,...m){uni.__log__?uni.__log__(l,n,...m):console[l].apply(console,[...m,n])}function k(l,n){return typeof l=="string"?n:l}var L=(l,n=0)=>(m,s=(0,x.getCurrentInstance)())=>{!x.isInSSRComponentSetup&&(0,x.injectHook)(l,m,s)},I=L(Y,3),$=L(U,3),P=uni.requireUTSPlugin("uni_modules/bsf-ali-queen"),q="/static/imgs/icon/back-prev.png",W=(l,n)=>{let m=l.__vccOpts||l;for(let[s,d]of n)m[s]=d;return m};var e=R(y()),K={"selfie-ctn":{"":{position:"relative"}},"camera-ctn":{".selfie-ctn ":{position:"relative"}},"camera-preview":{".selfie-ctn .camera-ctn ":{zIndex:0}},"camera-frame":{".selfie-ctn .camera-ctn ":{width:"312rpx",height:"408rpx",position:"absolute",left:"219rpx",top:"268rpx"}},"left-top":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderTopWidth:"4rpx",borderTopStyle:"solid",borderTopColor:"#ffffff",borderLeftWidth:"4rpx",borderLeftStyle:"solid",borderLeftColor:"#ffffff",borderTopLeftRadius:"40rpx",borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"absolute",left:0,top:0}},"right-top":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderTopWidth:"4rpx",borderTopStyle:"solid",borderTopColor:"#ffffff",borderRightWidth:"4rpx",borderRightStyle:"solid",borderRightColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:"40rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"absolute",right:0,top:0}},"right-bottom":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderBottomWidth:"4rpx",borderBottomStyle:"solid",borderBottomColor:"#ffffff",borderRightWidth:"4rpx",borderRightStyle:"solid",borderRightColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:"40rpx",borderBottomLeftRadius:0,position:"absolute",right:0,bottom:0}},"left-bottom":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderBottomWidth:"4rpx",borderBottomStyle:"solid",borderBottomColor:"#ffffff",borderLeftWidth:"4rpx",borderLeftStyle:"solid",borderLeftColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:"40rpx",position:"absolute",left:0,bottom:0}},"list-container":{"":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"}},item:{".list-container ":{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"20rpx",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",borderRadius:"12rpx"}},label:{".list-container ":{width:"250rpx",fontSize:"20rpx"}},stepper:{".list-container ":{flex:1,display:"flex",flexDirection:"row",marginLeft:"20rpx",justifyContent:"space-between",alignItems:"center"}},input:{".list-container ":{flex:1,minWidth:"100rpx",textAlign:"center",marginTop:0,marginRight:"10rpx",marginBottom:0,marginLeft:"10rpx",fontSize:"32rpx"}}},M={__name:"queue",setup(l){let n=(0,e.ref)(0),m=(0,e.ref)(0),s=(0,e.ref)(0),d=(0,e.ref)(!1),V=(0,e.computed)(()=>uni.getSystemInfoSync().platform==="android"?[{id:1,name:"\u78E8\u76AE",value:.3,min:0,max:1},{id:2,name:"\u9510\u5316",value:.3,min:0,max:1},{id:3,name:"\u7F8E\u767D",value:0,min:0,max:1},{id:4,name:"\u53BB\u773C\u888B",value:.2,min:0,max:1},{id:5,name:"\u53BB\u6CD5\u4EE4\u7EB9",value:.3,min:0,max:1},{id:6,name:"\u8272\u5361\u6EE4\u955C\u5F3A\u5EA6",value:0,min:0,max:1},{id:7,name:"\u6F02\u767D\u7259\u9F7F",value:1,min:0,max:1},{id:9,name:"\u816E\u7EA2",value:0,min:0,max:1},{id:8,name:"\u53E3\u7EA2",value:.3,min:0,max:1},{id:10,name:"\u53E3\u7EA2\u8272\u76F8",value:0,min:-.5,max:.5},{id:11,name:"\u53E3\u7EA2\u9971\u548C\u5EA6",value:.3,min:0,max:1},{id:12,name:"\u53E3\u7EA2\u660E\u5EA6",value:.1,min:0,max:1},{id:13,name:"\u4EAE\u773C",value:.6,min:0,max:1},{id:14,name:"\u7EA2\u6DA6",value:.2,min:0,max:1},{id:15,name:"\u795B\u76B1\u7EB9",value:.2,min:0,max:1},{id:16,name:"\u795B\u6697\u6C89",value:0,min:0,max:1},{id:20,name:"\u795B\u8116\u9888\u7EB9",value:0,min:0,max:1},{id:21,name:"\u795B\u989D\u5934\u7EB9",value:0,min:0,max:1},{id:22,name:"\u9971\u548C\u5EA6",value:.2,min:-1,max:1},{id:23,name:"\u5BF9\u6BD4\u5EA6",value:.2,min:-1,max:1},{id:24,name:"\u4EBA\u8138\u9A6C\u8D5B\u514B",value:0,min:0,max:1}]:[{id:1,name:"\u78E8\u76AE",value:.3,min:0,max:1},{id:2,name:"\u9510\u5316",value:.3,min:0,max:1},{id:3,name:"\u7F8E\u767D",value:0,min:0,max:1},{id:4,name:"\u53BB\u773C\u888B",value:.2,min:0,max:1},{id:5,name:"\u53BB\u6CD5\u4EE4\u7EB9",value:.3,min:0,max:1},{id:6,name:"\u8272\u5361\u6EE4\u955C\u5F3A\u5EA6",value:0,min:0,max:1},{id:7,name:"\u6F02\u767D\u7259\u9F7F",value:1,min:0,max:1},{id:9,name:"\u816E\u7EA2",value:0,min:0,max:1},{id:8,name:"\u53E3\u7EA2",value:.3,min:0,max:1},{id:10,name:"\u53E3\u7EA2\u8272\u76F8",value:0,min:-.5,max:.5},{id:11,name:"\u53E3\u7EA2\u9971\u548C\u5EA6",value:.3,min:0,max:1},{id:12,name:"\u53E3\u7EA2\u660E\u5EA6",value:.1,min:0,max:1},{id:13,name:"\u4EAE\u773C",value:.6,min:0,max:1},{id:14,name:"\u7EA2\u6DA6",value:.2,min:0,max:1},{id:15,name:"\u795B\u76B1\u7EB9",value:.1,min:0,max:1},{id:16,name:"\u795B\u6697\u6C89",value:0,min:0,max:1},{id:20,name:"\u795B\u8116\u9888\u7EB9",value:0,min:0,max:1},{id:21,name:"\u795B\u989D\u5934\u7EB9",value:0,min:0,max:1},{id:22,name:"\u9971\u548C\u5EA6",value:.2,min:-1,max:1},{id:23,name:"\u5BF9\u6BD4\u5EA6",value:.2,min:-1,max:1},{id:24,name:"\u4EBA\u8138\u9A6C\u8D5B\u514B",value:0,min:0,max:1}]),p=(0,e.ref)(V.value),f=(0,e.computed)(()=>uni.getSystemInfoSync().platform==="android"?[{id:0,name:"\u98A7\u9AA8",value:0,min:0,max:1},{id:1,name:"\u524A\u8138",value:.3,min:0,max:1},{id:2,name:"\u7626\u8138",value:.3,min:0,max:1},{id:3,name:"\u8138\u957F",value:.2,min:0,max:1},{id:4,name:"\u4E0B\u5DF4\u7F29\u77ED",value:0,min:-1,max:1},{id:5,name:"\u4E0B\u5DF4\u62C9\u957F",value:0,min:-1,max:1},{id:6,name:"\u7626\u4E0B\u5DF4",value:0,min:0,max:1},{id:7,name:"\u7626\u4E0B\u988C",value:.2,min:0,max:1},{id:8,name:"\u5927\u773C",value:.3,min:0,max:1},{id:9,name:"\u773C\u89D21",value:0,min:0,max:1},{id:10,name:"\u773C\u8DDD",value:0,min:-1,max:1},{id:11,name:"\u62C9\u5BBD\u773C\u8DDD",value:0,min:-1,max:1},{id:12,name:"\u773C\u89D22",value:0,min:-1,max:1},{id:13,name:"\u773C\u775B\u9AD8\u5EA6",value:0,min:-1,max:1},{id:14,name:"\u7626\u9F3B",value:.2,min:0,max:1},{id:15,name:"\u9F3B\u7FFC",value:0,min:0,max:1},{id:16,name:"\u9F3B\u957F",value:0,min:-1,max:1},{id:17,name:"\u9F3B\u5934\u957F",value:0,min:-1,max:1},{id:18,name:"\u5507\u5BBD",value:0,min:-1,max:1},{id:19,name:"\u5634\u5507\u5927\u5C0F",value:.1,min:-1,max:1},{id:20,name:"\u5507\u9AD8",value:0,min:-1,max:1},{id:21,name:"\u4EBA\u4E2D",value:0,min:-1,max:1},{id:22,name:"\u53D1\u9645\u7EBF",value:0,min:-1,max:1},{id:23,name:"\u5634\u89D2\u4E0A\u626C",value:0,min:0,max:1},{id:24,name:"\u6700\u5927\u503C\uFF08\u4FDD\u7559\uFF09",value:0,min:0,max:1}]:[{id:0,name:"\u98A7\u9AA8",value:0,min:0,max:1},{id:1,name:"\u524A\u8138",value:.3,min:0,max:1},{id:2,name:"\u7626\u8138",value:.3,min:0,max:1},{id:3,name:"\u8138\u957F",value:.2,min:0,max:1},{id:4,name:"\u4E0B\u5DF4\u7F29\u77ED",value:0,min:-1,max:1},{id:5,name:"\u4E0B\u5DF4\u62C9\u957F",value:0,min:-1,max:1},{id:6,name:"\u7626\u4E0B\u5DF4",value:0,min:0,max:1},{id:7,name:"\u7626\u4E0B\u988C",value:.2,min:0,max:1},{id:8,name:"\u5927\u773C",value:.3,min:0,max:1},{id:9,name:"\u773C\u89D21",value:0,min:0,max:1},{id:10,name:"\u773C\u8DDD",value:0,min:-1,max:1},{id:11,name:"\u62C9\u5BBD\u773C\u8DDD",value:0,min:-1,max:1},{id:12,name:"\u773C\u89D22",value:0,min:-1,max:1},{id:13,name:"\u773C\u775B\u9AD8\u5EA6",value:0,min:-1,max:1},{id:14,name:"\u7626\u9F3B",value:.2,min:0,max:1},{id:15,name:"\u9F3B\u7FFC",value:0,min:0,max:1},{id:16,name:"\u9F3B\u957F",value:0,min:-1,max:1},{id:17,name:"\u9F3B\u5934\u957F",value:0,min:-1,max:1},{id:18,name:"\u5507\u5BBD",value:0,min:-1,max:1},{id:19,name:"\u5634\u5507\u5927\u5C0F",value:.1,min:-1,max:1},{id:20,name:"\u5507\u9AD8",value:0,min:-1,max:1},{id:21,name:"\u4EBA\u4E2D",value:0,min:-1,max:1},{id:22,name:"\u53D1\u9645\u7EBF",value:0,min:-1,max:1},{id:23,name:"\u5634\u89D2\u4E0A\u626C",value:0,min:0,max:1},{id:24,name:"\u6700\u5927\u503C\uFF08\u4FDD\u7559\uFF09",value:0,min:0,max:1}]),_=(t,u)=>{let a=u[t];a.value<a.max&&(a.value=Number((a.value+.1).toFixed(2)),g(t,u))},C=(t,u)=>{let a=u[t];a.value>a.min&&(a.value=Number((a.value-.1).toFixed(2)),c("log","at pages/index/queue.nvue:191",a.value),g(t,u))},g=(t,u)=>{let a=u[t];a.value=Number(a.value),c("log","at pages/index/queue.nvue:202",`\u53D8\u66F4\uFF1A${a.name} \u5F53\u524D\u503C ${a.value}`),u[0].name==="\u98A7\u9AA8"?o.value.updateFaceShape(a.id,a.value):o.value.setBeautyParam(a.id,a.value)},B=(t,u)=>{let a=t.detail.value;/^(\d*\.\d{0,1})?$/.test(a)||a===""?p.value[u].value=a:p.value[u].value=0},o=(0,e.ref)(null);I(()=>{c("log","at pages/index/queue.nvue:229","queen onShow");let t=uni.getSystemInfoSync();n.value=t.windowWidth,m.value=t.windowHeight,s.value=m.value-uni.upx2px(624),d.value=!0}),$(()=>{o.value&&o.value.destoryCamera(),d.value=!1});let D=()=>{c("log","at pages/index/queue.nvue:254","\u6743\u9650\u88AB\u62D2\u7EDD"),uni.showToast({title:"\u4F60\u62D2\u7EDD\u4E86\u6743\u9650\u8BBE\u7F6E\uFF0C\u5373\u5C06\u8FD4\u56DE\u4E0A\u4E00\u9875",icon:"error",duration:1e3})},b=(0,e.ref)(!1),H=()=>{b.value=!b.value,o.value.toggleBeauty(),b.value&&N()},N=()=>{if(o.value)try{o.value.enableBeautyType(0,!0,1),o.value.enableBeautyType(1,!0,0),o.value.enableBeautyType(2,!0,0),o.value.enableBeautyType(3,!0,12),o.value.enableBeautyType(4,!0,0),o.value.enableBeautyType(5,!0,0),o.value.enableBeautyType(7,!0,0),o.value.enableBeautyType(8,!0,0),o.value.enableBeautyType(12,!0,12),o.value.enableBeautyType(15,!0,0),o.value.enableBeautyType(16,!0,0),p.value.forEach(t=>{o.value.setBeautyParam(t.id,t.value)}),f.value.forEach(t=>{o.value.updateFaceShape(t.id,t.value)}),c("log","at pages/index/queue.nvue:314","Default beauty params set")}catch(t){c("error","at pages/index/queue.nvue:316","Failed to set default beauty params:",t)}},F=t=>{o.value.toggleCamera()};(0,e.watch)(()=>uni.$store.state.loadComplete,(t,u)=>{t===!0&&uni.$store.state.isJudge===!0&&(0,e.nextTick)(()=>{uni.$store.dispatch("setIsJudge",!1);let a=getCurrentPages(),i=a.findIndex(r=>r.route==="pages/index/tryOn/index"),v=a.length-i-1;uni.hideLoading(),uni.navigateBack({delta:v})})});let A=()=>{uni.navigateBack({delta:1})};return(t,u)=>{k((0,e.resolveDynamicComponent)("bsf-queue-camera"),P.BsfQueueCameraComponent);let a=(0,e.resolveComponent)("button");return(0,e.openBlock)(),(0,e.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,e.createElementVNode)("view",{class:"selfie-ctn",style:(0,e.normalizeStyle)({width:`${n.value}px`,height:`${m.value}px`})},[(0,e.createElementVNode)("view",{class:"camera-ctn",style:(0,e.normalizeStyle)({width:`${n.value}px`,height:`${s.value}px`})},[d.value?((0,e.openBlock)(),(0,e.createElementBlock)("bsf-queue-camera",{key:0,style:(0,e.normalizeStyle)({width:`${n.value}px`,height:`${s.value}px`}),class:"camera-preview",ref_key:"CameraPreviewRef",ref:o,"on:onPermissionDeny":D,"on:onTakePhoto":u[0]||(u[0]=(...i)=>t.onTakePhoto&&t.onTakePhoto(...i)),"on:onGetFrame":u[1]||(u[1]=(...i)=>t.onGetFrame&&t.onGetFrame(...i))},null,36)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("cover-view",{class:"prevIcon-box",onClick:A},[(0,e.createElementVNode)("cover-image",{src:q,class:"prev-icon"})]),(0,e.createElementVNode)("view",{class:"camera-frame"},[(0,e.createElementVNode)("view",{class:"left-top"}),(0,e.createElementVNode)("view",{class:"right-top"}),(0,e.createElementVNode)("view",{class:"right-bottom"}),(0,e.createElementVNode)("view",{class:"left-bottom"})])],4),(0,e.createElementVNode)("scroll-view",{class:"list-container",scrollY:"",style:(0,e.normalizeStyle)({height:`${m.value-s.value}px`})},[(0,e.createVNode)(a,{onClick:H},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)((0,e.toDisplayString)((0,e.unref)(b)?"\u5DF2\u5173\u95ED":"\u5DF2\u6253\u5F00")+"\u7F8E\u989C\uFF08\u4F1A\u91CD\u7F6E\uFF09 ",1)]),_:1}),(0,e.createVNode)(a,{onClick:F},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("\u5207\u6362\u6444\u50CF\u5934")]),_:1}),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(p.value,(i,v)=>((0,e.openBlock)(),(0,e.createElementBlock)("view",{class:"item",key:i.id},[(0,e.createElementVNode)("view",{class:"label"},[(0,e.createElementVNode)("u-text",null,(0,e.toDisplayString)(i.name),1)]),(0,e.createElementVNode)("view",{class:"stepper"},[(0,e.createVNode)(a,{onClick:r=>C(v,p.value),disabled:i.value<=i.min},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("-")]),_:2},1032,["onClick","disabled"]),(0,e.createElementVNode)("u-input",{class:"input",type:"text",modelValue:i.value,onInput:[r=>i.value=r.detail.value,r=>B(r,v)],onChange:r=>g(v,p.value),min:i.min,max:i.max},null,40,["modelValue","onInput","onChange","min","max"]),(0,e.createVNode)(a,{onClick:r=>_(v,p.value),disabled:i.value>=i.max},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("+")]),_:2},1032,["onClick","disabled"])])]))),128)),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(f.value,(i,v)=>((0,e.openBlock)(),(0,e.createElementBlock)("view",{class:"item",key:i.id},[(0,e.createElementVNode)("view",{class:"label"},[(0,e.createElementVNode)("u-text",null,(0,e.toDisplayString)(i.name),1)]),(0,e.createElementVNode)("view",{class:"stepper"},[(0,e.createVNode)(a,{onClick:r=>C(v,f.value),disabled:i.value<=i.min},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("-")]),_:2},1032,["onClick","disabled"]),(0,e.createElementVNode)("u-input",{class:"input",type:"text",modelValue:i.value,onInput:[r=>i.value=r.detail.value,r=>B(r,v)],onChange:r=>g(v,f.value),min:i.min,max:i.max},null,40,["modelValue","onInput","onChange","min","max"]),(0,e.createVNode)(a,{onClick:r=>_(v,f.value),disabled:i.value>=i.max},{default:(0,e.withCtx)(()=>[(0,e.createTextVNode)("+")]),_:2},1032,["onClick","disabled"])])]))),128))],4)],4)])}}},h=W(M,[["styles",[K]]]);var w=plus.webview.currentWebview();if(w){let l=parseInt(w.id),n="pages/index/queue",m={};try{m=JSON.parse(w.__query__)}catch(d){}h.mpType="page";let s=Vue.createPageApp(h,{$store:getApp({allowDefault:!0}).$store,__pageId:l,__pagePath:n,__pageQuery:m});s.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...h.styles||[]])),s.mount("#root")}})();
