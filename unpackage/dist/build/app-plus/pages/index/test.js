"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var H=Object.create;var g=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var q=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);var E=(o,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of z(t))!V.call(o,n)&&n!==i&&g(o,n,{get:()=>t[n],enumerable:!(r=O(t,n))||r.enumerable});return o};var x=(o,t,i)=>(i=o!=null?H(j(o)):{},E(t||!o||!o.__esModule?g(i,"default",{value:o,enumerable:!0}):i,o));var u=q((M,h)=>{h.exports=Vue});var p=x(u()),N="onShow",Q="onHide";function l(o,t,...i){uni.__log__?uni.__log__(o,t,...i):console[o].apply(console,[...i,t])}function b(o,t){return typeof o=="string"?t:o}var v=(o,t=0)=>(i,r=(0,p.getCurrentInstance)())=>{!p.isInSSRComponentSetup&&(0,p.injectHook)(o,i,r)},w=v(N,3),y=v(Q,3),_=uni.requireUTSPlugin("uni_modules/bsf-ali-queen"),R="/static/imgs/icon/back-prev.png",C=(o,t)=>{let i=o.__vccOpts||o;for(let[r,n]of t)i[r]=n;return i};var e=x(u()),G="/static/imgs/photoLibrary/p1.png",J="/static/imgs/tryOn/camera.png",F="/static/imgs/tryOn/turn.png",U={"selfie-ctn":{"":{position:"relative"}},"camera-ctn":{".selfie-ctn ":{position:"relative"}},"camera-preview":{".selfie-ctn .camera-ctn ":{zIndex:0}},"back-box":{".selfie-ctn .camera-ctn ":{width:"80rpx",height:"80rpx",borderRadius:50,position:"absolute",left:"44rpx",top:"122rpx",zIndex:999}},"prev-icon":{".selfie-ctn .camera-ctn .back-box ":{width:"20rpx",height:"36rpx",position:"absolute",left:"30rpx",top:"22rpx"}},"camera-frame":{".selfie-ctn .camera-ctn ":{width:"312rpx",height:"408rpx",position:"absolute",left:"219rpx",top:"268rpx"}},"left-top":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderTopWidth:"4rpx",borderTopStyle:"solid",borderTopColor:"#ffffff",borderLeftWidth:"4rpx",borderLeftStyle:"solid",borderLeftColor:"#ffffff",borderTopLeftRadius:"40rpx",borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"absolute",left:0,top:0}},"right-top":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderTopWidth:"4rpx",borderTopStyle:"solid",borderTopColor:"#ffffff",borderRightWidth:"4rpx",borderRightStyle:"solid",borderRightColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:"40rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"absolute",right:0,top:0}},"right-bottom":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderBottomWidth:"4rpx",borderBottomStyle:"solid",borderBottomColor:"#ffffff",borderRightWidth:"4rpx",borderRightStyle:"solid",borderRightColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:"40rpx",borderBottomLeftRadius:0,position:"absolute",right:0,bottom:0}},"left-bottom":{".selfie-ctn .camera-ctn .camera-frame ":{width:"80rpx",height:"80rpx",borderBottomWidth:"4rpx",borderBottomStyle:"solid",borderBottomColor:"#ffffff",borderLeftWidth:"4rpx",borderLeftStyle:"solid",borderLeftColor:"#ffffff",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:"40rpx",position:"absolute",left:0,bottom:0}},"operate-ctn":{".selfie-ctn ":{height:"624rpx",backgroundColor:"#ffffff",borderTopLeftRadius:"40rpx",borderTopRightRadius:"40rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"absolute",left:0,bottom:0}},"text-ctn":{".selfie-ctn .operate-ctn ":{display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"60rpx",marginBottom:"120rpx"}},"text-box":{".selfie-ctn .operate-ctn .text-ctn ":{fontSize:"28rpx",fontWeight:"500",color:"#4a4b4d",textAlign:"center"}},"operate-ul":{".selfie-ctn .operate-ctn ":{display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"center"}},"photoAlbum-li":{".selfie-ctn .operate-ctn .operate-ul ":{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"photoAlbum-img":{".selfie-ctn .operate-ctn .operate-ul .photoAlbum-li ":{width:"100rpx",height:"100rpx",borderRadius:50}},"camera-li":{".selfie-ctn .operate-ctn .operate-ul ":{width:"160rpx",height:"160rpx",borderRadius:50,backgroundColor:"#242527",marginTop:0,marginRight:"74rpx",marginBottom:0,marginLeft:"74rpx",display:"flex",justifyContent:"center",alignItems:"center"}},"camera-img":{".selfie-ctn .operate-ctn .operate-ul .camera-li ":{width:"68rpx",height:"60rpx"}},"turn-li":{".selfie-ctn .operate-ctn .operate-ul ":{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"turn-img-box":{".selfie-ctn .operate-ctn .operate-ul .turn-li ":{width:"100rpx",height:"100rpx",borderRadius:50,boxShadow:"0rpx 0rpx 20rpx rgba(122, 122, 122, 0.3)",backgroundColor:"#ffffff",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"}},"turn-img":{".selfie-ctn .operate-ctn .operate-ul .turn-li .turn-img-box ":{width:"50rpx",height:"42rpx"}}},Y={__name:"test",setup(o){let t=(0,e.ref)(0),i=(0,e.ref)(0),r=(0,e.ref)(0),n=(0,e.ref)(!1),m=(0,e.ref)(null);w(()=>{let a=uni.getSystemInfoSync();l("log","at pages/index/test.nvue:70",a),t.value=a.windowWidth,i.value=a.windowHeight,r.value=i.value-uni.upx2px(624),l("log","at pages/index/test.nvue:75","camera size",t.value,r.value),n.value=!0});let T=()=>{l("log","at pages/index/test.nvue:86","\u6743\u9650\u88AB\u62D2\u7EDD"),uni.showToast({title:"\u4F60\u62D2\u7EDD\u4E86\u6743\u9650\u8BBE\u7F6E\uFF0C\u5373\u5C06\u8FD4\u56DE\u4E0A\u4E00\u9875",icon:"error",duration:1e3})};(0,e.ref)([{id:1,name:"\u78E8\u76AE",value:1,min:0,max:1},{id:2,name:"\u9510\u5316",value:1,min:0,max:1},{id:3,name:"\u7F8E\u767D",value:1,min:0,max:1},{id:4,name:"\u53BB\u773C\u888B",value:1,min:0,max:1},{id:5,name:"\u53BB\u6CD5\u4EE4\u7EB9",value:1,min:0,max:1},{id:6,name:"\u8272\u5361\u6EE4\u955C\u5F3A\u5EA6",value:0,min:0,max:1},{id:7,name:"\u6F02\u767D\u7259\u9F7F",value:1,min:0,max:1},{id:9,name:"\u816E\u7EA2",value:1,min:0,max:1},{id:8,name:"\u53E3\u7EA2",value:.9,min:0,max:1},{id:10,name:"\u53E3\u7EA2\u8272\u76F8",value:.5,min:-.5,max:.5},{id:11,name:"\u53E3\u7EA2\u9971\u548C\u5EA6",value:.4,min:0,max:1},{id:12,name:"\u53E3\u7EA2\u660E\u5EA6",value:.6,min:0,max:1},{id:13,name:"\u4EAE\u773C",value:0,min:0,max:1},{id:14,name:"\u7EA2\u6DA6",value:0,min:0,max:1},{id:15,name:"\u795B\u76B1\u7EB9",value:1,min:0,max:1},{id:16,name:"\u795B\u6697\u6C89",value:1,min:0,max:1},{id:20,name:"\u795B\u8116\u9888\u7EB9",value:1,min:0,max:1},{id:21,name:"\u795B\u989D\u5934\u7EB9",value:1,min:0,max:1},{id:22,name:"\u9971\u548C\u5EA6",value:0,min:-1,max:1},{id:23,name:"\u5BF9\u6BD4\u5EA6",value:0,min:-1,max:1},{id:24,name:"\u4EBA\u8138\u9A6C\u8D5B\u514B",value:0,min:0,max:1}]);let B=a=>{m.value.toggleCamera()},k=()=>{m.value.takePhoto()},S=a=>{l("log","at pages/index/test.nvue:195","\u62CD\u7167\u7ED3\u679C:",a);let s="";if(a.detail&&a.detail.base64)s=a.detail.base64;else if(a.base64)s=a.base64;else if(a.data&&a.data.base64)s=a.data.base64;else{l("error","at pages/index/test.nvue:207","\u672A\u627E\u5230base64\u6570\u636E"),uni.showToast({title:"\u62CD\u7167\u5931\u8D25\uFF0C\u672A\u83B7\u53D6\u5230\u56FE\u7247\u6570\u636E",icon:"error"});return}s.startsWith("data:")||(s=`data:image/jpeg;base64,${s}`),l("log","at pages/index/test.nvue:220","\u5904\u7406\u540E\u7684base64\u6570\u636E\u957F\u5EA6:",s.length),uni.$store.dispatch("setSelfieImgBase64",s),setTimeout(()=>{uni.navigateTo({url:"/pages/index/image"})},100)},L=()=>{uni.navigateTo({url:"/pages/index/ablum"})},P=a=>{l("log","at pages/index/test.nvue:237","\u83B7\u53D6\u7F8E\u989C\u540E\u7684\u7167\u7247:",a)};(0,e.watch)(()=>uni.$store.state.loadComplete,(a,s)=>{a===!0&&uni.$store.state.isJudge===!0&&(0,e.nextTick)(()=>{uni.$store.dispatch("setIsJudge",!1);let c=getCurrentPages(),W=c.findIndex(D=>D.route==="pages/index/tryOn/index"),$=c.length-W-1;uni.hideLoading(),uni.navigateBack({delta:$})})});let I=a=>{l("log","at pages/index/test.nvue:361","\u83B7\u53D6\u5E27\u6570\u636E:",a)};y(()=>{l("log","at pages/index/test.nvue:365","\u9875\u9762\u9690\u85CF"),m.value&&m.value.destoryCamera(),n.value=!1});let A=()=>{uni.navigateBack({delta:1})};return(a,s)=>(b((0,e.resolveDynamicComponent)("bsf-queue-camera"),_.BsfQueueCameraComponent),(0,e.openBlock)(),(0,e.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,e.createElementVNode)("view",{class:"selfie-ctn",style:(0,e.normalizeStyle)({width:`${t.value}px`,height:`${i.value}px`})},[(0,e.createElementVNode)("view",{class:"camera-ctn",style:(0,e.normalizeStyle)({width:`${t.value}px`,height:`${r.value}px`})},[n.value?((0,e.openBlock)(),(0,e.createElementBlock)("bsf-queue-camera",{key:0,style:(0,e.normalizeStyle)({width:`${t.value}px`,height:`${r.value}px`}),class:"camera-preview",ref_key:"CameraPreviewRef",ref:m,"on:onPermissionDeny":T,"on:onTakePhoto":S,"on:onGetFrame":I,"on:onBeautyImage":P,"on:onPermissionPermit":s[0]||(s[0]=(...c)=>a.onPermissionPermit&&a.onPermissionPermit(...c))},null,36)):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("cover-view",{class:"back-box",onClick:A},[(0,e.createElementVNode)("cover-image",{src:R,class:"prev-icon"})]),(0,e.createElementVNode)("view",{class:"camera-frame"},[(0,e.createElementVNode)("view",{class:"left-top"}),(0,e.createElementVNode)("view",{class:"right-top"}),(0,e.createElementVNode)("view",{class:"right-bottom"}),(0,e.createElementVNode)("view",{class:"left-bottom"})])],4),(0,e.createElementVNode)("view",{class:"operate-ctn",style:(0,e.normalizeStyle)({width:`${t.value}px`})},[(0,e.createElementVNode)("view",{class:"text-ctn"},[(0,e.createElementVNode)("view",null,[(0,e.createElementVNode)("u-text",{class:"text-box"},"\u8BF7\u5C3D\u91CF\u6458\u4E0B\u773C\u955C\u3001\u5E3D\u5B50\u3001\u53E3\u7F69\u7B49\u906E\u6321\u7269")]),(0,e.createElementVNode)("view",null,[(0,e.createElementVNode)("u-text",{class:"text-box"},"\u5728\u5149\u7EBF\u5145\u8DB3\u7684\u5730\u65B9\u62CD\u6444")])]),(0,e.createElementVNode)("view",{class:"operate-ul"},[(0,e.createElementVNode)("view",{class:"photoAlbum-li"},[(0,e.createElementVNode)("u-image",{src:G,class:"photoAlbum-img",onClick:L}),(0,e.createElementVNode)("view",null,[(0,e.createElementVNode)("u-text",{style:{"font-size":"24rpx","font-weight":"500"}},"\u76F8\u518C")])]),(0,e.createElementVNode)("view",{class:"camera-li",onClick:k},[(0,e.createElementVNode)("u-image",{src:J,class:"camera-img"})]),(0,e.createElementVNode)("view",{class:"turn-li"},[(0,e.createElementVNode)("view",{class:"turn-img-box",onClick:B},[(0,e.createElementVNode)("u-image",{src:F,class:"turn-img"})]),(0,e.createElementVNode)("view",null,[(0,e.createElementVNode)("u-text",{style:{"font-size":"24rpx","font-weight":"500"}},"\u7FFB\u8F6C")])])])],4)],4)]))}},d=C(Y,[["styles",[U]]]);var f=plus.webview.currentWebview();if(f){let o=parseInt(f.id),t="pages/index/test",i={};try{i=JSON.parse(f.__query__)}catch(n){}d.mpType="page";let r=Vue.createPageApp(d,{$store:getApp({allowDefault:!0}).$store,__pageId:o,__pagePath:t,__pageQuery:i});r.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...d.styles||[]])),r.mount("#root")}})();
